# 浮点数运算精度问题

Javascript采用了IEEE-745浮点数表示法（几乎所有的编程语言都采用），这是一种二进制表示法，可以精确地表示分数，比如1/2，1/8，1/1024。遗憾的是，我们常用的分数（特别是在金融的计算方面）都是十进制分数1/10，1/100等。二进制浮点数表示法并不能精确的表示类似0.1这样 的简单的数字，上诉代码的中的x和y的值非常接近最终的正确值，这种计算结果可以胜任大多数的计算任务：这个问题也只有在比较两个值是否相等时才会出现。 javascript的未来版本或许会支持十进制数字类型以避免这些舍入问题，在这之前，你更愿意使用大整数进行重要的金融计算，例如，要使用整数‘分’而不是使用小数‘元’进行货比单位的运算---------以上整理自《Javascript权威指南P37》


```
var a = 1.1 + 0.1  // 1.2000000000000002
var b = 0.1 + 0.2  // 0.30000000000000004
```

# 解决办法

## 1. *10/10变为整数再变为小数

```
var a = (1.1 * 10 + 0.1 * 10) / 10
var b = (0.1 * 10 + 0.2 * 10) / 10
```

## 3.toFixed()或toPrecision()

> toFixed 从小数点后计算，toPrecision从整数计算(整数位大于3位会转化为科学计算法，谨慎使用)

```
var a = Number((1.1 + 0.1).toFixed(10))
var b = Number((0.1 + 0.2).toFixed(10))
```

## 2. toLocaleString()

```
var a = Number((1.1 + 0.1).toLocaleString())
var b = Number((0.1 + 0.2).toLocaleString())
```

## 相关链接

[[ JS 基础 ] JS 浮点数四则运算精度丢失问题 (3)](https://segmentfault.com/a/1190000002613722)
